<%- include('partials/_header') -%> <%- include('partials/_navigation') -%>

<div class="col-lg-12 mt-4">
  <form
    method="POST"
    action="/admin/edit-product/<%= product.slug %>?_method=PUT"
    encType="multipart/form-data"
  >
    <div class="form-group row">
      <label for="productName" class="col-sm-2 col-form-label">Ürün İsmi</label>
      <div class="col-sm-10">
        <input
          type="text"
          class="form-control"
          id="productName"
          value="<%= product.name %>"
          name="name"
        />
      </div>
    </div>

    <div class="form-group row">
      <label for="image" class="col-sm-2 col-form-label">Görsel</label>
      <div class="col-sm-10">
        <input
          type="file"
          id="image"
          name="image"
          class="form-control-file rounded-0"
          multiple
        />
        <input id="editedImages" type="hidden" name="editedImages">
        <div class="row g-0">
          <% product.images.forEach((image)=> {%>
            <div class="card-image-col col-3 p-1">
                <span class="close"></span> 
                <img class="card-image" src="/<%= image %>" alt="">
            </div>
            <%}) %>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label for="size" class="col-sm-2 col-form-label">Ölçüler</label>
      <div class="col-sm-10">
        <input
          type="text"
          class="form-control"
          id="size"
          value="<%= product.size %>"
          name="size"
        />
      </div>
    </div>

    <div class="form-group row">
      <label for="description" class="col-sm-2 col-form-label">Açıklama</label>
      <div class="col-sm-10">
        <textarea
          class="form-control"
          id="description"
          name="description"
          rows="4"
        >
<%= product.description %> </textarea
        >
      </div>
    </div>

    <div class="form-group row">
      <label for="category" class="col-sm-2 col-form-label">Kategori</label>
      <div class="col-sm-10">
        <select class="form-control" id="category" name="category">
          <option value="-1">Kategori seçiniz</option>
          <% for (let i=0; i < categories.length; i++) { %> 
          <option value="<%= categories[i]._id %>" <%= String(categories[i]._id) == String(product.category) ? "selected" : "" %>>
            <%= categories[i].name %>
          </option>
          <% } %>
        </select>
      </div>
    </div>

    <div class="form-group row">
      <label for="moreInfo" class="col-sm-2 col-form-label">Detay Bilgi</label>
      <div class="col-sm-10">
        <input
          type="text"
          class="form-control"
          id="moreInfo"
          value="<%= product.moreInfo %>"
          name="moreInfo"
        />
      </div>
    </div>

    <div class="form-group row">
      <label for="color" class="col-sm-2 col-form-label">Renk</label>
      <div class="col-sm-10">
        <input
          type="text"
          class="form-control"
          id="color"
          value="<%= product.color %>"
          name="color"
        />
      </div>
    </div>

    <div class="form-group row">
      <div class="col-sm-10 offset-sm-2">
        <input type="submit" class="btn btn-primary" value="Ürünü Kaydet" />
      </div>
    </div>
  </form>
</div>
<script src="/scripts/main.js"></script>

<%- include('partials/_footer') -%>
